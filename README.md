# 课程表推送Python脚本说明

## 一、功能简介

本脚本包含两个python程序文件，classpush_am 的功能为每天上午上课前推送当天课程到用户，周一到周五推送当天课程，周六推送下周课程图片到邮箱，周日仅推送日期提醒；**classpush**_pm的功能是每天下午推送第二天的课程到用户。

## 二、部署前准备

本程序部署于腾讯云函数，QQ消息推送采用Qmsg酱，邮件推送采用网易163邮箱



1、腾讯云函数注册：

https://cloud.tencent.com/product/scf

2、Qmsg酱注册：

https://qmsg.zendee.cn/

3、网易163邮箱注册：

https://mail.163.com/

4、一个QQ号，用于接收QQ推送

5、一个邮箱账号（与第三步不同的邮箱账号），用于接受邮件推送，手机推荐安装QQ邮箱或网易邮箱大师APP并开启APP通知权限，以便及时接收推送消息。



## 三、开始部署

#### 1.文件结构说明

##### 1.1 classpush_am结构说明 

| 文件名    | 功能说明                                                     |
| --------- | ------------------------------------------------------------ |
| pic       | 用于存储每周的课表图片的文件夹，这些图片将会于每周六发送到邮箱 |
| data.json | 全部课表数据，json形式存储，utf-8编码，读取为Python字典，格式为{'周次':{'星期几':[当天课程]}} |
| index.py  | 脚本主程序                                                   |

##### 1.1 classpush_pm结构说明 

| 文件名    | 功能说明                                                     |
| --------- | ------------------------------------------------------------ |
| data.json | 全部课表数据，json形式存储，utf-8编码，读取为Python字典，格式为{'周次':{'星期几':[当天课程]}} |
| index.py  | 脚本主程序                                                   |

ps：pic内容及data.json文件因为每个人的课程不同而不同，数据生成脚本一并给出，但使用可能存在一定难度。



### 2.具体部署步骤



1.QQ推送设置：

注册Qmsg酱按照说明添加好友，添加QQ号，获取KEY，将KEY填到index.py 的第25行

2.邮箱推送设置：

*<!--服务器默认是网易163邮箱，其他请自行更改Push类中的mailpic()函数的相关地址及端口-->*

登录网易163邮箱，选择设置 ——> POP3/SMTP/IMAP设置——>开启服务IMAP/SMTP服务——>新增授权密码

将获得的授权密码填到第29行，其他按程序注释填写

3.保存，将程序及依赖打包成一个压缩文件

4.登录腾讯云函数，新建函数，上传zip包，安装自己想要执行的时间设置触发器，执行即可

5.classpush_pm的部署过程同上，但不需要pic文件











